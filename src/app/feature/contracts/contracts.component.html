<div class="title-container">
  <a href="/packages" class="title-link">
    <svg viewBox="0 0 16 16">
      <use xlink:href="./assets/icons/bootstrap-icons.svg#file-earmark-text" />
    </svg>
    /contracts
  </a>
</div>
<div class="card shadow m-3">
  <div
    class="card-body"
    style="border-bottom: 1px solid var(--sidebar-background-color)"
  >
    <div class="d-flex align-items-center w-100">
      <div>
        <h5
          class="card-title text-nowrap bg-body-secondary border"
          style="width: 5.9rem"
        >
          Contracts <b>Management</b>.
        </h5>
        <p class="card-text text-muted" style="font-size: 0.9rem">
          Manage your contracts, add new ones, and view details.
        </p>
      </div>
      <div class="btn-group ms-auto custom-btn-group">
        <a
          title="Add new package"
          style="cursor: pointer"
          (click)="openAddContractModal()"
        >
          <svg fill="currentColor" viewBox="0 0 16 16" class="title-icon">
            <use
              [attr.xlink:href]="
                './assets/icons/bootstrap-icons.svg#plus-square-fill'
              "
            ></use>
          </svg>
        </a>
      </div>
    </div>
  </div>

  <div class="card" style="border-radius: 0; border: none">
    <div class="card-body">
      <!-- Filtro de estado -->
      <div class="mb-3">
        <select
          class="form-select"
        >
          <option value="">All Statuses</option>
          <option *ngFor="let status of statuses" [value]="status">
            {{ status }}
          </option>
        </select>
      </div>

      <!-- Tabla de contratos -->
      <div class="table-responsive px-3">
        <table class="table table-hover table-sm table-bordered" style="font-size: 14px">
          <thead class="table-dark">
            <tr class="table-light">
              <th>ID</th>
              <th>User</th>
              <th>Package</th>
              <th>Value</th>
              <th>Payday</th>
              <th>Start Date</th>
              <th>End Date</th>
              <th>Status</th>
              <th class="text-center">Actions</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let contract of contracts">
              <td>{{ contract.id }}</td>
              <td>{{ contract.user.strUserName }}</td>
              <td>{{ contract.package.name }}</td>
              <td>{{ contract.value }}</td>
              <td>{{ contract.payday }}</td>
              <td>{{ contract.startDate }}</td>
              <td>{{ contract.endDate }}</td>
              <td>
                <span
                  class="badge"
                  [class.bg-success]="contract.status === 'ACTIVE'"
                  [class.bg-warning]="contract.status === 'DRAFT'"
                  [class.bg-danger]="contract.status === 'EXPIRED'"
                >
                  {{ contract.status }}
                </span>
              </td>
              <td class="text-center">
                <div
                  class="btn-group btn-group-sm"
                  role="group"
                  aria-label="Small button group"
                >
                  <a
                    style="
                      color: var(--sidebar-background-color);
                      cursor: pointer;
                    "
                  >
                    <svg
                      fill="currentColor"
                      viewBox="0 0 16 16"
                      class="status-icon"
                    >
                      <use
                        xlink:href="./assets/icons/bootstrap-icons.svg#eye"
                      />
                    </svg>
                  </a>
                  <a
                    style="
                      color: var(--sidebar-background-color);
                      cursor: pointer;
                    "
                  >
                    <svg
                      fill="currentColor"
                      viewBox="0 0 16 16"
                      class="status-icon"
                    >
                      <use
                        xlink:href="./assets/icons/bootstrap-icons.svg#pencil-square"
                      />
                    </svg>
                  </a>
                  <a
                    style="
                      color: var(--sidebar-background-color);
                      cursor: pointer;
                    "
                  >
                    <svg
                      fill="currentColor"
                      viewBox="0 0 16 16"
                      class="status-icon"
                    >
                      <use
                        xlink:href="./assets/icons/bootstrap-icons.svg#trash"
                      />
                    </svg>
                  </a>
                </div>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>

  <!-- Controles de paginación -->
  <div
    class="d-flex justify-content-between align-items-center mt-3 pagination-wrapper"
  >
    <!-- Badge de vista -->
    <div>
      <h6 class="view-badge">
        <!-- <span class="badge badge-list" *ngIf="viewMode === 'list'"
          >List view</span
        >
        <span class="badge badge-cards" *ngIf="viewMode === 'cards'"
          >Cards view</span
        > -->
      </h6>
    </div>

    <!-- Contador -->
    <div class="user-counter">
      Showing {{ contracts.length }} of {{ contracts.length }} contracts
    </div>

    <!-- Paginación -->
    <div>
      <nav aria-label="Paginación de tarjetas" class="m-2">
        <ul class="pagination pagination-sm mb-0 custom-pagination">
          <!-- Botón Anterior -->
          <li class="page-item" [class.disabled]="page === 1">
            <a
              class="page-link"
              href="#"
              aria-label="Anterior"
            >
              <i class="bi bi-chevron-left"></i>
            </a>
          </li>

          <!-- Números de página -->
          <li
            class="page-item"
            *ngFor="let page of pages"
            [class.active]="page === page"
          >
            <a class="page-link" href="#" >{{
              page
            }}</a>
          </li>

          <!-- Botón Siguiente -->
          <li class="page-item">
            <a
              class="page-link"
              href="#"
              aria-label="Siguiente"
            >
              <i class="bi bi-chevron-right"></i>
            </a>
          </li>
        </ul>
      </nav>
    </div>
  </div>
  <!-- Modal para agregar un nuevo contrato -->
  <app-add-contract
    *ngIf="showAddContractModal"
    (close)="closeModal()"
  ></app-add-contract>
</div>
