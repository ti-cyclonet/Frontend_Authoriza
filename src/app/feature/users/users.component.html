<div class="title-container">
  <a href="/users" class="title-link">
    <svg viewBox="0 0 16 16">
      <use xlink:href="./assets/icons/bootstrap-icons.svg#people-fill" />
    </svg>
    /users
  </a>
</div>
<div class="card shadow m-3">
  <div class="card-body">
    <h5
      class="card-title text-nowrap bg-body-secondary border"
      style="width: 3rem"
    >
      User <b>Management</b>.
    </h5>
    <div class="subtitle">
      <h6 class="users-titleOne">Search by name, email, or application</h6>
    </div>

    <div
      class="input-group mb-3"
      style="
        border: 1px solid var(--sidebar-background-color);
        border-radius: 0.375rem;
        overflow: hidden;
      "
    >
      <input
        type="text"
        class="form-control custom-search-input"
        placeholder="Write some words to filter"
        [(ngModel)]="searchTerm"
        (input)="filterUsers()"
      />
      <span
        class="input-group-text"
        style="background-color: transparent; border: none"
      >
        <svg
          fill="currentColor"
          viewBox="0 0 16 16"
          style="
            width: 1rem;
            height: 1rem;
            color: var(--primary_active_text_color);
          "
        >
          <use xlink:href="./assets/icons/bootstrap-icons.svg#search" />
        </svg>
      </span>
    </div>

    <table class="table table-striped table-small small">
      <thead>
        <tr>
          <th scope="col" class="text-center">Id</th>
          <th scope="col" class="text-center">User Name</th>
          <th scope="col" class="text-center">Email</th>
          <th scope="col" class="text-center">Person Type</th>
          <th scope="col" class="text-center">Rol</th>
          <th scope="col" class="text-center">State</th>
          <th scope="col" class="text-center">Update date</th>
          <th scope="col" class="text-center">Actions</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let user of filteredUsers">
          <th scope="row">
            <span
              class="badge"
              style="background-color: var(--header-icon-color)"
            >
              {{ user.id }}
            </span>
          </th>
          <td>{{ user.strUserName }}</td>
          <td>{{ user.strUserName || "-" }}</td>
          <!-- <td>{{ user.strEmail || '-' }}</td> -->
          <td class="text-center">
            {{
              user.basicData?.strPersonType === "N"
                ? "Natural"
                : user.basicData?.strPersonType === "J"
                ? "Legal"
                : "-"
            }}
          </td>

          <td class="text-center">{{ user.rol?.strName || "-" }}</td>
          <td class="text-center">
            <b
              [ngClass]="{
                'text-danger': user.strStatus.toUpperCase() === 'INACTIVE',
                'text-success': user.strStatus.toUpperCase() === 'ACTIVE'
              }"
            >
              <svg fill="currentColor" viewBox="0 0 16 16" class="status-icon">
                <use
                  [attr.xlink:href]="
                    './assets/icons/bootstrap-icons.svg#' +
                    (user.strStatus === 'ACTIVE'
                      ? 'emoji-smile'
                      : 'emoji-frown')
                  "
                ></use>
              </svg>
              {{ user.strstatus }}
            </b>
          </td>
          <td class="text-center">
            {{ user.dtmLatestUpdateDate | date : "dd/MM/yyyy" }}
          </td>
          <td class="text-center">
            <div
              class="btn-group btn-group-sm"
              role="group"
              aria-label="Small button group"
            >
              <a style="color: var(--sidebar-background-color)">
                <svg
                  fill="currentColor"
                  viewBox="0 0 16 16"
                  class="status-icon"
                >
                  <use
                    [attr.xlink:href]="'./assets/icons/bootstrap-icons.svg#eye'"
                  ></use>
                </svg>
              </a>
              <a style="color: var(--sidebar-background-color)">
                <svg
                  fill="currentColor"
                  viewBox="0 0 16 16"
                  class="status-icon"
                >
                  <use
                    [attr.xlink:href]="
                      './assets/icons/bootstrap-icons.svg#pencil'
                    "
                  ></use>
                </svg>
              </a>
              <!-- <a style="color: var(--sidebar-background-color);">
                <svg
                  fill="currentColor"
                  viewBox="0 0 16 16"
                  class="status-icon"
                >
                  <use
                    [attr.xlink:href]="
                      './assets/icons/bootstrap-icons.svg#trash3'
                    "
                  ></use>
                </svg>
              </a> -->
            </div>
          </td>
        </tr>
      </tbody>
    </table>
  </div>
</div>
